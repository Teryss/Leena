#include "defs.h"

/* How PEXT offsets are calculated
uint start = 0;
for (uint i = 0; i < 64; i++){
    if (i % 8 == 0) { printf("\n"); }
    printf("%i, ", start);
    start += (1ULL << BISHOP_RELEVANT_BITS_BY_SQUARE[i]);
    if (i == 63){ printf("end: %i\n", start - 1); }
}

printf("\n");

for (uint i = 0; i < 64; i++){
    if (i % 8 == 0) { printf("\n"); }
    printf("%i, ", start);
    start += (1ULL << ROOK_RELEVANT_BITS_BY_SQUARE[i]);
    if (i == 63){ printf("end: %i\n", start - 1); }
}
*/

const uint BISHOP_PEXT_OFFSET[64] = {
    0, 64, 96, 128, 160, 192, 224, 256,
    320, 352, 384, 416, 448, 480, 512, 544,
    576, 608, 640, 768, 896, 1024, 1152, 1184,
    1216, 1248, 1280, 1408, 1920, 2432, 2560, 2592,
    2624, 2656, 2688, 2816, 3328, 3840, 3968, 4000,
    4032, 4064, 4096, 4224, 4352, 4480, 4608, 4640,
    4672, 4704, 4736, 4768, 4800, 4832, 4864, 4896,
    4928, 4992, 5024, 5056, 5088, 5120, 5152, 5184,
};

const uint ROOK_PEXT_OFFSET[64] = {
    5248, 9344, 11392, 13440, 15488, 17536, 19584, 21632,
    25728, 27776, 28800, 29824, 30848, 31872, 32896, 33920,
    35968, 38016, 39040, 40064, 41088, 42112, 43136, 44160,
    46208, 48256, 49280, 50304, 51328, 52352, 53376, 54400,
    56448, 58496, 59520, 60544, 61568, 62592, 63616, 64640,
    66688, 68736, 69760, 70784, 71808, 72832, 73856, 74880,
    76928, 78976, 80000, 81024, 82048, 83072, 84096, 85120,
    87168, 91264, 93312, 95360, 97408, 99456, 101504, 103552,
};

// max number of possible variotions - 4096
const uint ROOK_RELEVANT_BITS_BY_SQUARE[64] = {
    12, 11, 11, 11, 11, 11, 11, 12, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    12, 11, 11, 11, 11, 11, 11, 12,
};

// max number of possible variotions - 512
const uint BISHOP_RELEVANT_BITS_BY_SQUARE[64] = {
    6, 5, 5, 5, 5, 5, 5, 6, 
    5, 5, 5, 5, 5, 5, 5, 5, 
    5, 5, 7, 7, 7, 7, 5, 5, 
    5, 5, 7, 9, 9, 7, 5, 5, 
    5, 5, 7, 9, 9, 7, 5, 5, 
    5, 5, 7, 7, 7, 7, 5, 5, 
    5, 5, 5, 5, 5, 5, 5, 5, 
    6, 5, 5, 5, 5, 5, 5, 6,
};

// enum castling {wk = 1, wq = 2, bk = 4, bq = 8}, sum: 15;
const uint CASTLING_CHANGE_ON_MOVE[64] = {
    wq + wk + bk, 15, 15, 15, wq + wk, 15, 15, bq + wk + wq,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    bk + bq + wk, 15, 15, 15, bq + bk, 15, 15, bk + bq + wq,
};